{"name":"Overhead Tile Fade for All Tokens - Toggle Mode","type":"script","author":"Q394i9Sacg2Mm8b2","img":"icons/svg/dice-target.svg","scope":"global","command":"/* toggle fade for when hidden tokens are under the tile */\nconst tiles = canvas.foreground.controlled;\nif(tiles.length === 0) return ui.notifications.error(\"You must have a tile selected to activate this macro.\");\n\nlet updateData = [];\nfor(let tile of tiles) {\n  let setting = tile.data.flags['overhead-tile-fade-for-all-tokens']?.mode;\nconsole.log(setting);\n  let newSetting = (setting !== \"OFF\")? \"OFF\":\"BY_VISIBILITY\";\nconsole.log(newSetting);\n   \n  updateData.push({_id: tile.data._id, 'flags.overhead-tile-fade-for-all-tokens.mode': newSetting});\n}\nawait canvas.scene.updateEmbeddedDocuments('Tile', updateData);","folder":null,"sort":0,"permission":{"default":0,"Q394i9Sacg2Mm8b2":3},"flags":{"core":{"sourceId":"Compendium.overhead-tile-fade-for-all-tokens.overhead-tile-fade-for-all-tokens-macros.KNCY3hsFK96BSMJ9"}},"_id":"Z52AVMxQnkMGphTP"}
